// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/GameModeBase.h"
#include "Bomberman_012025GameMode.generated.h"

class ABloque_Padre;
class ABloqueLadrillo;
class AEnemigo;
class ABloqueMadera;


UCLASS(minimalapi)
class ABomberman_012025GameMode : public AGameModeBase
{
	GENERATED_BODY()

public:
	ABomberman_012025GameMode();
public:
	virtual void BeginPlay() override;




public:
	//posicion del siguiente bloque 
	// 
	FVector PosicionSiguienteBloque = FVector(2000.0f, 1000.0f, 50.0f);
	//FVector PosicionSiguienteBloque = FVector(500.0f, 250.0f, 10.0f);
	
	
	//declarar un mapa de bloques con un arrray bidimensional 
	TArray<TArray<int32>> aMapaBloques = {
	{ 0,  0,  0,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1 },
	{ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1 },
	{ 0,  0,  2,  3,  4,  5,  6,  7,  0,  9, 10,  0,  1,  2,  3,  4,  5,  6,  7,  8,  9,  0,  0,  1,  2,  3,  4,  5,  6,  7,  8,  0,  10, 0,  1,  2,  3,  4,  5,  6,  7,  8,  0,  10, 0,  6,  2,  3,  0,  1 },
	{ 1,  0,  2,  2,  2,  2,  2,  2,  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0,  2,  2,  2,  2,  2,  0,  1 },
	{ 1,  0,  4, 10,  0,  5,  9,  2,  0,  6,  1,  3,  0,  7,  5,  2,  9,  4,  6,  8,  0,  0,  3,  5,  7,  1,  2,  4,  6,  8,  3,  0,  3,  5,  2,  4,  6,  8,  9,  7,  2,  5,  0,  4,  6,  0,  3,  8,  0,  1 },
	{ 1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1 },
	{ 1,  0,  7, 10,  0,  5,  9,  2,  0,  6, 10,  3,  0,  7,  5,  2,  9,  4,  6,  8,  0,  0,  3,  5,  7, 10,  2,  4,  6,  8,  1,  0,  3,  5,  2,  4,  6,  8,  9,  7,  2,  5,  0,  4,  6,  0,  3,  8,  0,  1 },
	{ 1,  0,  1,  2,  3,  4,  5,  6,  0,  8,  9, 10,  0,  1,  2,  3,  4,  5,  6,  7,  8,  0, 10,  0,  1,  2,  3,  4,  5,  6,  7,  0,  9, 10,  0,  1,  2,  3,  4,  5,  6,  7,  0,  9, 10,  0,  8,  2,  0,  1 },
	{ 1,  0,  4, 10,  0,  5,  9,  2,  0,  6,  1,  3,  0,  7,  5,  2,  9,  4,  6,  8,  0,  0,  3,  5,  7,  10,  2,  4,  6,  8,  1,  0,  3,  5,  2,  4,  6,  8,  9,  7,  2,  5,  0,  4,  6,  0,  3,  8,  0,  1 },
	{ 1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1 },
	{ 1,  0,  7,  1,  0,  5,  9,  2,  0,  6, 10,  3,  0,  7,  5,  2,  9,  4,  6,  8,  0,  0,  3,  5,  7, 10,  2,  4,  6,  8,  1,  0,  3,  5,  2,  4,  6,  8,  9,  7,  2,  5,  0,  4,  6,  0,  3,  8,  0,  1 },
	{ 1,  0,  2,  3,  4,  5,  6,  7,  0,  9, 10,  0,  1,  2,  3,  4,  5,  6,  7,  8,  9,  0,  0,  7,  2,  3,  4,  5,  6,  7,  8,  0, 10,  0,  1,  2,  3,  4,  5,  6,  7,  8,  0, 10,  0,  1,  2,  3,  0,  1 },
	{ 1,  0,  4,  2,  0,  5,  8,  7,  0,  9,  2,  3,  1,  4,  0,  5,  8,  7,  6,  9,  5,  0,  3,  4,  5,  0,  6,  7,  8,  9,  2,  0,  4,  4,  0,  5,  8,  7,  6,  9,  1,  2,  0,  4,  5,  0,  6,  7,  0,  1 },
	{ 1,  0,  3,  4,  5,  6,  7,  8,  0,  1,  0,  2,  3,  4,  5,  6,  7,  8,  9,  2,  0,  0,  3,  4,  5,  6,  7,  8,  9,  10,  0,  0,  3,  4,  5,  6,  7,  8,  9,  1,  0,  2,  0,  4,  5,  6,  7,  8,  0,  1 },
	{ 1,  0,  3,  2,  1,  0,  9,  8,  0,  6,  5,  4,  3,  2,  7,  0,  9,  8,  7,  6,  5,  0,  3,  2,  1,  0,  9,  8,  7,  6,  5,  0,  3,  2,  1,  0,  9,  8,  7,  6,  5,  4,  0,  2,  1,  0,  9,  8,  0,  1 },
	{ 1,  0,  2,  3,  4,  5,  6,  7,  0,  9,  1,  0,  2,  3,  4,  5,  6,  7,  8,  9,  1,  0,  2,  3,  4,  5,  6,  7,  8,  9,  1,  0,  2,  3,  4,  5,  6,  7,  8,  9,  1,  0,  0,  3,  4,  5,  6,  7,  0,  1 },
	{ 1,  0,  7,  6,  5,  4,  3,  2,  0,  0,  9,  8,  7,  6,  5,  4,  3,  2,  1,  0,  9,  0,  7,  6,  5,  4,  3,  2,  1,  0,  9,  0,  7,  6,  5,  4,  3,  2,  1,  0,  9,  8,  0,  6,  5,  4,  3,  2,  0,  1 },
	{ 1,  0,  1,  3,  0,  5,  6,  7,  0,  9,  3,  2,  1,  0,  5,  4,  6,  7,  8,  9,  2,  0,  10,  0,  5,  4,  6,  7,  8,  9,  10,  0,  2,  3,  4,  5,  6,  7,  8,  9,  0,  1,  0,  3,  4,  5,  6,  7,  0,  1 },
	{ 1,  0,  2,  3,  4,  5,  6,  7,  0,  9,  1,  2,  3,  4,  5,  6,  7,  8,  9,  0,  1,  0,  3,  4,  5,  6,  7,  8,  9,  0,  10,  0,  3,  4,  5,  6,  7,  8,  9,  0,  1,  2,  0,  4,  5,  6,  7,  8,  0,  1 },
	{ 1,  0,  3,  2,  1,  0,  9,  8,  0,  6,  5,  4,  3,  2,  1,  0,  9,  8,  7,  6,  5,  0,  3,  2,  1,  0,  9,  8,  7,  6,  5,  0,  3,  2,  1,  0,  9,  8,  7,  6,  5,  4,  0,  2,  1,  0,  9,  8,  0,  1 },
	{ 1,  0,  2,  3,  4,  5,  6,  7,  0,  9,  1,  0,  2,  3,  4,  5,  6,  7,  8,  9,  10,  0,  2,  3,  4,  5,  6,  7,  8,  9,  9,  0,  2,  3,  4,  5,  6,  7,  8,  9,  1,  0,  0,  3,  4,  5,  6,  7,  0,  1 },
	{ 1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1 },
	{ 1,  0,  2,  3,  4,  5,  6,  7,  0,  9, 10,  0,  1,  2,  3,  4,  5,  6,  7,  8,  9,  0,  0,  1,  2,  3,  4,  5,  6,  7,  8,  0,  10, 0,  1,  2,  3,  4,  5,  6,  7,  8,  0,  10, 0,  1,  2,  3,  0,  1 },
	{ 1,  0,  2,  2,  2,  2,  2,  2,  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0,  2,  2,  2,  2,  2,  0,  1 },
	{ 1,  0,  4,  1,  0,  5,  9,  2,  0,  6,  1,  3,  0,  7,  5,  2,  9,  4,  6,  8,  0,  0,  0,  0,  0,  0,  0,  0,  0,  8,  1,  0,  3,  5,  2,  4,  6,  8,  9,  7,  2,  5,  0,  4,  6,  0,  3,  8,  0,  1 },
	{ 1,  0,  1,  2,  3,  4,  5,  6,  0,  8,  9, 10,  0,  1,  2,  3,  4,  5,  6,  7,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  9, 10,  0,  1,  2,  3,  4,  5,  6,  7,  0,  9, 10,  0,  3,  2,  0,  1 },
	{ 1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1 },
	{ 1,  0,  1,  2,  3,  4,  5,  6,  0,  8,  9, 10,  0,  5,  2,  3,  4,  5,  6,  7,  8,  0, 10,  0,  1,  2,  3,  4,  5,  6,  7,  0,  9, 10,  0,  1,  2,  3,  4,  5,  6,  7,  0,  9, 10,  0,  4,  2,  0,  1 },
	{ 1,  0,  4,  1,  0,  5,  9,  2,  0,  6,  6,  3,  0,  7,  5,  2,  9,  4,  6,  8,  0,  0,  3,  5,  7,  2,  2,  4,  6,  8,  8,  0,  3,  5,  2,  4,  6,  8,  9,  7,  2,  5,  0,  4,  6,  0,  3,  8,  0,  1 },
	{ 1,  0,  1,  2,  3,  4,  5,  6,  0,  8,  9, 10,  0,  1,  2,  3,  4,  5,  6,  7,  8,  0, 10,  0,  9,  2,  3,  4,  5,  6,  7,  0,  9, 10,  0,  1,  2,  3,  4,  5,  6,  7,  0,  9, 10,  0,  5,  2,  0,  1 },
	{ 1,  0,  7,  1,  0,  5,  9,  2,  0,  6, 10,  3,  0,  7,  5,  2,  9,  4,  6,  8,  0,  0,  3,  5,  7, 10,  2,  4,  6,  8,  6,  0,  3,  5,  2,  4,  6,  8,  9,  7,  2,  5,  0,  4,  6,  0,  3,  8,  0,  1 },
	{ 1,  0,  2,  3,  4,  5,  6,  7,  0,  9, 10,  0,  1,  2,  3,  4,  5,  6,  7,  8,  9,  0,  0,  7,  2,  3,  4,  5,  6,  7,  8,  0, 10,  0,  1,  2,  3,  4,  5,  6,  7,  8,  0, 10,  0,  1,  2,  3,  0,  1 },
	{ 1,  0,  4,  2,  0,  5,  8,  7,  0,  9,  2,  3,  1,  4,  0,  5,  8,  7,  6,  9,  5,  0,  3,  4,  5,  0,  6,  7,  8,  9,  2,  0,  8,  4,  0,  5,  8,  7,  6,  9,  1,  2,  0,  4,  5,  0,  6,  7,  0,  1 },
	{ 1,  0,  3,  4,  5,  6,  7,  8,  0,  8,  0,  2,  3,  4,  5,  6,  7,  8,  9,  7,  0,  0,  3,  4,  5,  6,  7,  8,  9,  4,  0,  0,  3,  4,  5,  6,  7,  8,  9,  1,  0,  2,  0,  4,  5,  6,  7,  8,  0,  1 },
	{ 1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1 },
	{ 1,  0,  2,  3,  4,  5,  6,  7,  0,  9,  3,  0,  2,  3,  4,  5,  6,  7,  8,  9,  2,  0,  2,  3,  4,  5,  6,  7,  8,  9,  9,  0,  2,  3,  4,  5,  6,  7,  8,  9,  1,  0,  0,  3,  4,  5,  6,  7,  0,  1 },
	{ 1,  0,  7,  6,  5,  4,  3,  2,  0,  0,  9,  8,  7,  6,  5,  4,  3,  2,  1,  0,  9,  0,  7,  6,  5,  4,  3,  2,  1,  0,  9,  0,  7,  6,  5,  4,  3,  2,  1,  0,  9,  8,  0,  6,  5,  4,  3,  2,  0,  1 },
	{ 1,  0,  1,  3,  0,  5,  6,  7,  0,  9,  3,  2,  5,  0,  5,  4,  6,  7,  8,  9,  2,  0,  1,  0,  5,  4,  6,  7,  8,  9,  7,  0,  2,  3,  4,  5,  6,  7,  8,  9,  0,  1,  0,  3,  4,  5,  6,  7,  0,  1 },
	{ 1,  0,  2,  3,  4,  5,  6,  7,  0,  9,  6,  2,  3,  4,  5,  6,  7,  8,  9,  0,  0,  0,  3,  4,  5,  6,  7,  8,  9,  0,  5,  0,  3,  4,  5,  6,  7,  8,  9,  0,  1,  2,  0,  4,  5,  6,  7,  8,  0,  1 },
	{ 1,  0,  3,  2,  2,  0,  9,  8,  0,  6,  5,  4,  3,  2,  7,  0,  9,  8,  7,  6,  5,  0,  3,  2,  5,  0,  9,  8,  7,  6,  5,  0,  3,  2,  1,  0,  9,  8,  7,  6,  5,  4,  0,  2,  1,  0,  9,  8,  0,  1 },
	{ 1,  0,  2,  3,  4,  5,  6,  7,  0,  9,  9,  0,  2,  3,  4,  5,  6,  7,  8,  9,  8,  0,  2,  3,  4,  5,  6,  7,  8,  9,  4,  0,  2,  3,  4,  5,  6,  7,  8,  9,  1,  0,  0,  3,  4,  5,  6,  7,  0,  1 },
	{ 1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1 },
	{ 1,  0,  2,  3,  4,  5,  6,  7,  0,  9, 10,  0,  3,  2,  3,  4,  5,  6,  7,  8,  9,  0,  0,  1,  2,  3,  4,  5,  6,  7,  8,  0,  10, 0,  1,  2,  3,  4,  5,  6,  7,  8,  0,  10, 0,  10,  2,  3,  0,  1 },
	{ 1,  0,  2,  2,  2,  2,  2,  2,  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0,  2,  2,  2,  2,  2,  0,  1 },
	{ 1,  0,  4,  3,  0,  5,  9,  2,  0,  6,  3,  3,  0,  7,  5,  2,  9,  4,  6,  8,  0,  0,  3,  5,  7,  1,  2,  4,  6,  8,  3,  0,  3,  5,  2,  4,  6,  8,  9,  7,  2,  5,  0,  4,  6,  0,  3,  8,  0,  1 },
	{ 1,  0,  9,  2,  3,  4,  5,  6,  0,  8,  9, 10,  0,  8,  2,  3,  4,  5,  6,  7,  8,  0, 10,  0,  3,  2,  3,  4,  5,  6,  7,  0,  9, 10,  0,  1,  2,  3,  4,  5,  6,  7,  0,  9, 10,  0,  10,  2,  0,  1 },
	{ 1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1 },
	{ 1,  0,  5,  2,  3,  4,  5,  6,  0,  8,  9, 10,  0,  9,  2,  3,  4,  5,  6,  7,  8,  0, 10,  0,  2,  2,  3,  4,  5,  6,  7,  0,  9, 10,  0,  1,  2,  3,  4,  5,  6,  7,  0,  9, 10,  0,  10,  2,  0,  1 },
	{ 1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1 },
	{ 1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 1,  1,  1,  1,  1,  1 }
	};
	//dimensiones y posicion del bloque
	float XInicial = 300.00f; 
	float YInicial = 200.00f;
	float AnchoBloque = 100.0f;
	float LargoBloque = 100.0f;
	ABloque_Padre* BloqueActual = nullptr;
	//declarar un array de punteros a objetos de tipo BloqueMadera 
	TArray<ABloque_Padre*> aBloques;
                 

	FTimerHandle thDestruirBloque;

	//void SpawnBloques();
	//void SpawnBloque(FVector posicionBloque,int32 tipoBloque);
	
	void DestruirBloque();

	//para acomodar el laberinto 
	void SpawnLaberinto();
	TArray<FVector> PosicionesValidas;
	
	void SpawnPersonaje();	
	TArray<FVector> PosicionesValidasPersonaje;

public:
	//para enemigos
	void SpawnEnemigo();
	// Declaración de variables necesarias
	TArray<FVector> PosicionesLibresEnemigos; // Para almacenar posiciones válidas de spawn
	UPROPERTY()
	TArray<AEnemigo*> EnemigosA;//GUARDA LOS ENEMIGOS 
	



	
	//void InicializarPosicionesEnemigos();

	void EliminarBloque();                                       
	
	void IniciarEliminarBloque();


	//para Eliminar bloques

	FTimerHandle TimerEliminarBloque;
	FTimerHandle TimerInicialBloquesMadera;

	//TArray<AEnemigo*> EnemigosCreados
                                        //preguntas para el parcial 


	void MoverBloquesAleatorios(); //progunta 4
	FTimerHandle TimerMovimientoBloques;

	// Agrega la declaración del TimerHandle
	FTimerHandle TimerHandle_CambiarDireccion;

	// Declara la función que cambiará la dirección
	void CambiarDireccion();

	// Variable para rastrear la dirección actual
	bool bDireccionEnX;
	bool bDireccionEnY;

	//para que spawnee en los bloques libres de madera pregunta 1 
	TArray <FVector> aposicionesLibresMadera;
	TArray <FVector> bloquesCandidatosLocalesMadera;
	TArray<ABloque_Padre*> BloqueMadera;

	void PosicionarEnBloqueMaderaConMasAdyacentes();

	//para el ejercito builder 



};



